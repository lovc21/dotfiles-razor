---
- name: "nvm | {{ ansible_distribution }} | Check if nvm is installed"
  ansible.builtin.stat:
    path: "{{ ansible_env.HOME }}/.nvm/nvm.sh"
  register: nvm_installed

- name: "nvm | {{ ansible_distribution }} | Install nvm"
  ansible.builtin.shell: >
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/master/install.sh | bash
  args:
    creates: "{{ ansible_env.HOME }}/.nvm/nvm.sh"
  become: false
  when: not nvm_installed.stat.exists
