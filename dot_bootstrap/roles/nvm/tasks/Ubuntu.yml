---
- name: "nvm | {{ ansible_facts['distribution'] }} | Check if nvm is installed"
  ansible.builtin.stat:
    path: "{{ host_user_home }}/.nvm/nvm.sh"
  register: nvm_installed
  become: false

- name: "nvm | {{ ansible_facts['distribution'] }} | Install nvm"
  ansible.builtin.shell: >
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/master/install.sh | bash
  args:
    creates: "{{ host_user_home }}/.nvm/nvm.sh"
  become: false
  when: not nvm_installed.stat.exists
