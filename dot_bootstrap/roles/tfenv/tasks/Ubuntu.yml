---
- name: "tfenv | {{ ansible_facts['distribution'] }} | Check if tfenv is installed"
  ansible.builtin.stat:
    path: "{{ host_user_home }}/.tfenv"
  register: tfenv_installed
  become: false

- name: "tfenv | {{ ansible_facts['distribution'] }} | Clone tfenv"
  ansible.builtin.git:
    repo: https://github.com/tfutils/tfenv.git
    dest: "{{ host_user_home }}/.tfenv"
    depth: 1
  become: false
  when: not tfenv_installed.stat.exists
